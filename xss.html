<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>XSS Example</title>
<style type="text/css">
#ajax_result {
	padding: 10px;
	background: #FBFEF5;
	border: 1px dashed black;
}
</style>
<script type="text/javascript" src="http://yui.yahooapis.com/2.7.0/build/utilities/utilities.js"></script>
<script type="text/javascript" src="http://yui.yahooapis.com/2.8.0r4/build/json/json-min.js"></script>
<script type="text/javascript">
//<![CDATA[
var start_ajax = function() {
	var callback = {
		success : function(o) {
			try {
				var result = eval('(' + o.responseText + ')');
				//var result = YAHOO.lang.JSON.parse(o.responseText);
				
				var html = "<ul>";
				for (var i in result) {
					html += "<li>";
					html += i + " hosting is often " + result[i];
					html += "</li>";
				}
				html += "</ul>";
				
				document.getElementById("ajax_result").innerHTML = html;
			}
			catch(e) {
				document.getElementById("ajax_result").innerHTML = "bad json!";
			}
		},
		
		failure : function(o) {
			document.getElementById("ajax_result").innerHTML = "something went wrong";
		}
	};
	
	YAHOO.util.Connect.asyncRequest("POST", "ajax_json.php", callback);
};
//]]>
</script>
</head>
<body>
	<form action="xss.php" method="POST">
	Name: <input type="text" name="name" /><br />
	Comment:<br />
	<textarea name="comment" rows="10" cols="30"></textarea><br />
	<input type="submit" value="Submit" />
	</form>
</body>
</html>